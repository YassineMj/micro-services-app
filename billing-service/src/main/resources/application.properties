spring.application.name=billing-service

server.port=8083

spring.cloud.config.enabled=true

spring.config.import=optional:configserver:${CONFIG_SERVICE_URL:http://localhost:8084}


#Activer le health indicator pour les circuit breakers
management.health.circuitbreakers.enabled=true

#Toujours afficher les details de /actuator/health
management.endpoint.health.show-details=always

#Activer health indicator
resilience4j.circuitbreaker.instances.customerServiceCB.register-health-indicator=true

#Taille de la fenetre de surveillance (nombre d appels a analyser)
resilience4j.circuitbreaker.instances.customerServiceCB.sliding-window-size=5

#Nombre minimal d appels avant d activer les calculs d echec
resilience4j.circuitbreaker.instances.customerServiceCB.minimum-number-of-calls=3

#Pourcentage d echec tolere avant ouverture du circuit
resilience4j.circuitbreaker.instances.customerServiceCB.failure-rate-threshold=50

#Temps d attente avant de passer d OPEN a HALF_OPEN
resilience4j.circuitbreaker.instances.customerServiceCB.wait-duration-in-open-state=5s

#Nombre d appels autorises en mode HALF_OPEN
resilience4j.circuitbreaker.instances.customerServiceCB.permitted-number-of-calls-in-half-open-state=2

